(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1498:function(t,e,n){"use strict";var o=n(424);n.n(o).a},1499:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".set-bg .nya-radio{margin-right:.625rem;margin-bottom:.625rem}.set-bg .inputbtn,.set-bg .nya-subtitle{margin-top:.9375rem}.set-bg .preview{display:block;max-height:12.5rem;border:.0625rem solid var(--t1)}",""])},1500:function(t,e,n){"use strict";var o=n(425);n.n(o).a},1501:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".setting .nya-checkbox{margin-right:.9375rem}.setting .nya-btn{margin-top:.9375rem}.setting .nya-copy{margin-bottom:0}",""])},1535:function(t,e,n){"use strict";n(339),n(18);var o=n(150),r=n.n(o),l=function(t,e){return new Promise(function(t,n){var o=new FormData;o.append("smfile",e),o.append("format","json"),r.a.post("https://sm.ms/api/upload",o).then(t).catch(n)})},c=function(t,e){r.a.get(e).catch(function(){})},d={name:"SetBackground",components:{VueSlider:n(340)},data:function(){return{customUrl:"",upload:{n:"",smmsData:null,file:"",requestIn:!1}}},mounted:function(){var t=this.$store.state.setting;this.customUrl=t.bg.customUrl,this.upload.smmsData={url:t.bg.upload.url}},methods:{handleChange:function(t,e){this.$store.commit("SET_STORE",{key:t,value:e})},handleUploadChange:function(t){var e=t.target.files;if(!e.length)return!1;var n=e[0];n.size/1024/1024>5?(this.upload.n="",this.$modal.show("dialog",{title:"识别失败",text:"ERROR: 请选择大小在5M以内的图片"})):this.upload.file=n},uploadImg:function(){var t=this;return!!this.upload.file&&(!this.upload.requestIn&&(this.upload.smmsData=null,this.upload.requestIn=!0,void l(this,this.upload.file).then(function(e){t.upload.smmsData=e.data.data,t.setUploadBg()}).catch(function(e){t.$modal.show("dialog",{title:"上传图片失败",text:"ERROR: ".concat(e)}),t.upload.requestIn=!1})))},setUploadBg:function(){this.$store.commit("SET_STORE",{key:"setting.bg.upload",value:{url:this.upload.smmsData.url,deleteUrl:this.upload.smmsData.delete}}),this.upload.requestIn=!1},removeBg:function(){var t=this.$store.state.setting.bg.upload;c(this,t.deleteUrl),this.$store.commit("SET_STORE",{key:"setting.bg.upload",value:{url:"",deleteUrl:""}}),this.upload.smmsData=null},setCustomUrl:function(){this.$store.commit("SET_STORE",{key:"setting.bg.customUrl",value:this.customUrl})}}},h=(n(1498),n(2)),component=Object(h.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nya-container",{staticClass:"set-bg",attrs:{title:"背景图片"}},[n("div",{staticClass:"radio-group"},[n("nya-radio-group",{attrs:{value:t.$store.state.setting.bg.type},on:{change:function(e){return t.handleChange("setting.bg.type",e)}}},[n("nya-radio",{attrs:{value:"none",label:"无"}}),t._v(" "),n("nya-radio",{attrs:{value:"anime",label:"随机动漫图片"}}),t._v(" "),n("nya-radio",{attrs:{value:"bing",label:"必应每日壁纸"}}),t._v(" "),n("nya-radio",{attrs:{value:"custom",label:"自定义来源"}}),t._v(" "),n("nya-radio",{attrs:{value:"upload",label:"上传壁纸"}})],1)],1),t._v(" "),n("nya-input",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.$store.state.setting.bg.type,expression:"$store.state.setting.bg.type === 'custom'"}],attrs:{value:t.$store.state.setting.bg.customUrl,label:"输入壁纸链接",placeholder:t.$store.state.env.url+"/icon.png",autocomplete:"off",fullwidth:""},on:{change:function(e){return t.handleChange("setting.bg.customUrl",e.target.value)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleChange("setting.bg.customUrl",e.target.value)}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"upload"===t.$store.state.setting.bg.type,expression:"$store.state.setting.bg.type === 'upload'"}]},[n("div",{staticClass:"inputbtn"},[n("nya-input",{staticClass:"upfile",attrs:{type:"file",accept:"image/*",label:"请选择要设置的背景图片",placeholder:"点击这里上传文件"},on:{change:t.handleUploadChange},model:{value:t.upload.n,callback:function(e){t.$set(t.upload,"n",e)},expression:"upload.n"}}),t._v(" "),n("button",{staticClass:"nya-btn",attrs:{type:"button",disabled:t.upload.requestIn},on:{click:t.uploadImg}},[t._v("\n                "+t._s(t.upload.requestIn?"设置中":"设置")+"\n            ")])],1),t._v(" "),t.upload.smmsData&&t.upload.smmsData.url?n("div",[n("div",{staticClass:"nya-subtitle"},[t._v("\n                预览(当前背景)\n            ")]),t._v(" "),n("img",{staticClass:"preview",attrs:{src:t.upload.smmsData.url,alt:"preview"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.setting.bg,expression:"$store.state.setting.bg"}],staticClass:"nya-btn",on:{click:t.removeBg}},[t._v("\n                移除背景\n            ")])]):t._e()]),t._v(" "),n("hr"),t._v(" "),n("nya-checkbox",{attrs:{checked:t.$store.state.setting.bg.transparentEl,label:"元素半透明"},on:{change:function(e){return t.handleChange("setting.bg.transparentEl",e)}}}),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n        高斯模糊\n    ")]),t._v(" "),n("no-ssr",[n("vue-slider",{attrs:{value:t.$store.state.setting.bg.blur,lazy:"",min:0,max:100},on:{change:function(e){return t.handleChange("setting.bg.blur",e)}}})],1),t._v(" "),n("div",{staticClass:"nya-subtitle"},[t._v("\n        透明度\n    ")]),t._v(" "),n("no-ssr",[n("vue-slider",{attrs:{value:t.$store.state.setting.bg.opacity,lazy:"",min:1,max:100},on:{change:function(e){return t.handleChange("setting.bg.opacity",e)}}})],1)],1)},[],!1,null,null,null);e.a=component.exports},1582:function(t,e,n){"use strict";n.r(e);var o=n(423).a,r=(n(1500),n(2)),component=Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting"},[n("SetBackground"),t._v(" "),n("nya-container",{attrs:{title:"自定义 CSS"}},[n("nya-input",{attrs:{value:t.$store.state.setting.css,fullwidth:"",rows:"5",type:"textarea",autocomplete:"off",placeholder:".navbar{display: none}"},on:{change:function(e){return t.handleChange("setting.css",e.target.value)}}})],1),t._v(" "),n("nya-container",{attrs:{title:"自定义 JS"}},[n("nya-input",{attrs:{value:t.$store.state.setting.js,fullwidth:"",rows:"5",type:"textarea",autocomplete:"off",placeholder:"alert('欢迎使用 MikuTools')"},on:{change:function(e){return t.handleChange("setting.js",e.target.value)}}})],1),t._v(" "),n("nya-container",{attrs:{title:"其他设置"}},[n("nya-checkbox",{attrs:{checked:t.$store.state.setting.hideNotice,label:"隐藏公告"},on:{change:function(e){return t.handleChange("setting.hideNotice",e)}}}),t._v(" "),n("nya-checkbox",{attrs:{checked:t.$store.state.setting.hideCategory,label:"隐藏分类"},on:{change:function(e){return t.handleChange("setting.hideCategory",e)}}}),t._v(" "),n("nya-checkbox",{attrs:{checked:t.$store.state.setting.hidePay,label:"隐藏打赏"},on:{change:function(e){return t.handleChange("setting.hidePay",e)}}}),t._v(" "),n("nya-checkbox",{attrs:{checked:t.$store.state.setting.inNewTab,label:"新标签打开工具"},on:{change:function(e){return t.handleChange("setting.inNewTab",e)}}}),t._v(" "),n("nya-checkbox",{attrs:{checked:t.$store.state.setting.animations,label:"启用过渡动画"},on:{change:function(e){return t.handleChange("setting.transition",e)}}})],1),t._v(" "),n("nya-container",{attrs:{title:"导出配置"}},[n("div",{staticClass:"nya-subtitle"},[t._v("\n            可将当前网站配置移动到其他设备使用\n        ")]),t._v(" "),n("nya-copy",{attrs:{copy:t.config}},[n("div",{domProps:{textContent:t._s(t.config)}})]),t._v(" "),n("div",{staticClass:"nya-btn",on:{click:t.importConfig}},[t._v("\n            导入配置\n        ")]),t._v(" "),n("div",{staticClass:"nya-btn",on:{click:t.clearCache}},[t._v("\n            清除数据\n        ")])],1)],1)},[],!1,null,null,null);e.default=component.exports},423:function(t,e,n){"use strict";(function(t){n(86),n(87),n(18);var o=n(1535);e.a={name:"Setting",head:function(){return this.$store.state.currentTool.head},components:{SetBackground:o.a},data:function(){return{syncIng:!1}},computed:{config:function(){return t.from(JSON.stringify({setting:this.$store.state.setting,dark:this.$store.state.dark})).toString("base64")}},methods:{handleChange:function(t,e){this.$store.commit("SET_STORE",{key:t,value:e})},importConfig:function(){var e=prompt("请粘贴配置信息");try{e=JSON.parse(t.from(e,"base64").toString())}catch(t){return this.$toasted.error("配置信息无效，请重新确认"),!1}this.$store.commit("SET_STORE",{key:"setting",value:e.setting}),this.$store.commit("SET_STORE",{key:"dark",value:e.dark}),this.init(),this.$toasted.success("导入成功")},clearCache:function(){localStorage.removeItem("mikudb"),localStorage.removeItem("miku_vuex"),alert("清除成功，即将刷新页面"),window.location.reload()}}}}).call(this,n(9).Buffer)},424:function(t,e,n){var content=n(1499);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(4).default)("6f462027",content,!0,{sourceMap:!1})},425:function(t,e,n){var content=n(1501);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(4).default)("416344e5",content,!0,{sourceMap:!1})}}]);